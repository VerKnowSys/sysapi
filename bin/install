#!/bin/sh
# blame: @dmilith
# 2018-12-10-0127-1544401657


_params="${1:-release}"


kill_and_strip () {
    killall -TERM "${_bin_name}" 2>/dev/null
    echo "Strip: SysAPI: ${_bin_product_target}" \
        && strip -s -d "${_bin_product_target}" \
        && return 0
    return 1
}


install_product () {
    install -v "${_bin_product_target}" "${_sysapi_dest_bin}" \
        && echo "Installed: SysAPI binary: ${_bin_product_target}" \
        && return 0

    return 1
}


# install - main():
bin/build "${_params}" \
    && kill_and_strip \
    && install_product \
    && exit 0

exit 1
